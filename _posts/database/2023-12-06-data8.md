# 8장 데이터베이스 설계

## 01. DB 설계 단계

1. DB 설계
   
   사용자의 다양한 요구 사항을 고려해 DB 생성하는 과정

2. 관계 DB의 대표적인 설계 방법
   
   1. E-R모델과 릴레이션 변환 규칙을 이용한 설계
      
      🚨 설계 과정 중 오류 발견해 변경이 필요하면 이전 단계로 되돌아가 설계 내용을 변경 가능함 
   
   2. 정규화를 이용한 설계 

## 02. 요구 사항 분석

### ⭐설계 1단계 : 요구 사항 분석

- 목적
  
  사용자의 요구 사항을 수집 분석해 개발할 DB 용도를 파악하는 것으로
  
  업무에 필요한 데이터가 무엇인지, 그 데이터에 어떤 처리가 필요한지 고려하는 것을 말함

- 결과물 -> `요구 사항 명세서`

- 주요 작업
  
  - DB를 실제로 사용할 `주요 사용자의 범위 결정`
  
  - `사용자가 조직에서 수행하는 업무 분석`
  
  - 면담, 설문 조사, 업무 관련 문서 분석 등 방법을 이용해 `요구 사항 수집`
  
  - 수집된 요구 사항에 대한 `분석 결과를 요구 사항 명세서로 작성`

## 03. 개념적 설계

### ⭐설계 2단계 : 개념적 설계

- 목적
  
  - DBMS에 독립적인 개념적 스키마 설계
  
  - 요구 사항 분석 결과물을 개념적 데이터 모델 이용해 개념적 구조로 표현
    
    ▶ 개념적 모델링
  
  - 일반적으로 E-R모델 많이 사용함

- 결과물 ▶ 개념적 스키마 : E-R 다이어그램

- 주요 작업
  
  요구 사항 분석 결과를 기반으로 중요한 개체 추출하고 개체 간 관계를 결정해 E-R 다이어그램으로 표현

#### 개념적 설계 - (STEP 1) 개체와 속성 추출

개체 : 저장할 만한 가치가 있는 중요 데이터를 가진 사람이나 사물

[개체 추출 방법]

- 요구 사항 문장에서 업무와 관련이 깊은 의미 있는 명사를 찾아라!
  
  - 업무와 관련이 적은 일반적이고 광범위한 의미의 명사는 제외
  
  - 의미가 같은 명사가 여러 개일 경우는 대표 명사 하나만 선택

- 찾아낸 명사를 개체와 속성으로 분류하라!

🚨 예시

#### 개념적 설계 - (STEP 2) 관계 추출

관계 : 개체 간의 의미 있는 연관성

[관계 추출 방법]

- 요구 사항 문장에서 개체 간 연관성을 의미 있게 표현한 <mark>동사</mark>를 찾아라!

- 찾아낸 관계에 대해 매핑 카디널리티와 참여 특성을 결정하라!
  
  - <mark>매핑 카디널리티</mark> : 일대일(1:1), 일대다(1:N), 다대다 (N:M)
  
  - <mark>참여 특성</mark> : 필수적 참여 / 선택적 참여 

🚨 예시

## 04. 논리적 설계

### 설계 3단계 : 논리적 설계

- 목적
  
  - DBMS에 적합한 논리적 스키마 설계
  
  - 개념적 스키마를 논리적 데이터 모델을 이용해 논리적 구조로 표현
    
    ▶ 논리적 모델링(데이터 모델링)
  
  - 일반적으로 관계 데이터 모델을 많이 이용

- 결과물 ▶ 논리적 스키마 : <mark>릴레이션 스키마 </mark>

- 주요 작업
  
  - 개념적 설계 단계의 결과물인 E-R 다이어그램을 릴레이션 스키마로 변환
  
  - 릴레이션 스키마로 변환 후 속성의 데이터 타입, 길이, 널 값 허용 여부, 기본 값, 제약조건 등을 세부적으로 결정하고 결과를 문서화시킴 

### ⭐논리적 설계 규칙

변환 규칙을 순서대로 적용하되, 해당되지 않는 규칙은 제외함

#### 규칙 1. 모든 개체는 릴레이션으로 변환한다.

E-R 다이어그램의 각 개체를 하나의 릴레이션으로 변환 

🚨 변환 예시 

개체의 이름 ▶ 릴레이션의 이름 

개체의 속성 ▶ 릴레이션의 속성

개체의 키 속성 ▶ 릴레이션의 기본키 

🚨 개체의 속성이 복합 속성인 경우 <mark>복합 속성을 구성하고 있는 단순 속성만 릴레이션 속성으로 변환</mark>

#### 규칙 2. 다대다 관계는 릴레이션으로 변환한다.

E-R 다이어그램의 다대다 관계를 하나의 릴레이션으로 변환

🚨 변환 예시

관계의 이름 ▶ 릴레이션의 이름

관계의 속성 ▶ 릴레이션의 속성

관계에 참여하는 개체를 규칙 1에 따라 릴레이션으로 변환 후 이 릴레이션의 기본키를 관계 릴레이션에 포함시켜 외래키로 지정하고, 외래키들을 조합해 관계 릴레이션의 기본키로 지정 

#### 규칙 3. 일대다 관계는 외래키로 표현한다.

1. 일반적인 일대다 관계는 외래키로 표현한다. 
   
   1. 일대다 관계에서 1측 개체 릴레이션의 기본키를 N측 개체 릴레이션에 포함시켜 외래키로 지정
   
   2. 관계의 속성들도 N측 개체 릴레이션에 포함시킴

2. 약한 개체가 참여하는 일대다 관계는 외래키를 포함해서 기본키로 지정 
   
   1. 일대다 관계에서 1측 개체 릴레이션의 기본키를 N측 개체 릴레이션에 포함시켜 외래키로 지정
   
   2. 관계의 속성들도 N측 개체 릴레이션에 포함시킴
   
   3. N측 개체 릴레이션은 욀래키를 포함해 기본키 지정
      
      - 약한 개체는 강한 개체에 따라 존재 여부 결정되므로 강한 개체의 기본키를 이용해 식별해야 함 

#### 규칙 4. 일대일 관계를 외래키로 표현한다.

1. 일반적인 일대일 관계는 외래키를 서로 주고 받음
   
   1. 관계에 참여하는 개체 릴레이션들이 서로의 기본키를 주고 받아 외래키로 지정
   
   2. 관계의 속성들도 모든 개체 릴레이션에 포함
   
   3. <mark>불필요한 데이터 중복 발생</mark>

2. 일대일 관계에 필수적 참여하는 개체 릴레이션만 외래키를 받음
   
   - 관계에 필수적으로 참여하는 개체 릴레이션에만 외래키 포함
   
   - 관계의 속성들은 관계에 필수적으로 참여하는 개체 릴레이션에 포함 

3. 모든 개체가 일대일 관계에 필수적 참여하면 릴레이션 하나로 합침
   
   - 관계에 참여하는 개체 릴레이션들을 하나의 릴레이션으로 합쳐서 표현 
   
   - 관계의 이름을 릴레이션 이름으로 사용하고, 관계에 참여하는 두 개체의 속성들을 관계 릴레이션에 모두 포함시킴
   
   - 두 개체 릴레이션의 키 속성을 조합해 관계 릴레이션의 기본키로 지정 

#### 규칙 5. 다중 값 속성은 릴레이션으로 변환한다.

1. 다중 값 속성과 함께 그 속성을 가지고 있던 개체 릴레이션의 기본키를 외래키로 가져와 새로운 릴레이션에 포함시킴

2. 새로운 릴레이션의 기본키는 다중 값 속성과 외래키를 조합해 지정

#### 기타 고려 사항

- 모든 관계를 독릷적인 릴레이션으로 변환할 수 있다. 

- 개체가 자기 자신과 관계를 맺는 순환 관계도 기본 규칙을 그대로 적용

## 05. 물리적 설계와 구현

### 설계 4단계 : 물리적 설계

하드웨어나 운영체제의 특성을 고려해 필요한 인덱스 구조나 내부 저장 구조 등에 대한 물리적인 구조 설계

### 설계 5단계 : 구현

SQL로 작성한 명령문을 DBMS에서 실행해 DB를 실제로 생성
