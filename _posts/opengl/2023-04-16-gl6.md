---
layout: single
title: "[openGL]ì¶©ëŒ"
categories: OpenGL
tags: [opengl, ì¶©ëŒ]
sidebar:
    nav: "counts"
---

# 1. ì¶©ëŒ

ë²½ëŒê¹¨ê¸° í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ê¸° ìœ„í•´ ì²œì²œíˆ ê¸°ì´ˆë¶€í„° ë‹¤ì§€ë ¤ê³  í•œë‹¤. 

ì²˜ìŒë¶€í„° ë²½ëŒì„ ë§Œë“¤ê¸°ëŠ” ì–´ë ¤ìš°ë‹ˆ ê³µê³¼ ê³µì´ ì„œë¡œ ì¶©ëŒí•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ë ¤ í•œë‹¤.

ë¨¼ì € ê³µì€ ì›ì´ê¸° ë•Œë¬¸ì— ì›ì„ 2ê°œ ê·¸ëŸ¬ì¤€ë‹¤. í•˜ë‚˜ëŠ” ê³ ì •ëœ ì›ì„ ê·¸ë¦¬ê³  ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ì›€ì§ì´ëŠ” ê³µì„ ê·¸ë¦°ë‹¤. 

ê³µì„ ê·¸ë¦¬ëŠ” í•¨ìˆ˜ëŠ” ì•ì—ì„œ ë§ì´ ì‘ì„±í–ˆê¸° ë•Œë¬¸ì— ìƒëµí•˜ê² ë‹¤..!! 

ë¨¼ì € ê³µê³¼ ê³µì´ ì¶©ëŒí•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ë‹¤ ã…ã…



# 2. ê³µê³¼ ê³µì˜ ì¶©ëŒ ì—¬ë¶€

![image-20230416205817313]({site.url}/images/2023-04-16-gl5/image-20230416205817313.png)

1. ê³ ì •ëœ ê³µì˜ ì¤‘ì‹¬ì  (x1, y1) ë°˜ì§€ë¦„(r1) , ì›€ì§ì´ëŠ” ê³µì˜ ì¤‘ì‹¬ì  (x2, y2) ë°˜ì§€ë¦„(r2)
2. ë‘ ê³µ ì‚¬ì´ì˜ ê±°ë¦¬ `distance` ë¥¼ ì´ìš©í•´ ì¶©ëŒì¸ì§€ ì•„ë‹Œì§€ë¥¼ êµ¬í•  ìˆ˜ ìˆë‹¤.
3. `ê±°ë¦¬ >  r1+ r2`ëŠ” ì¶©ëŒì„ í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì´ë‹¤. ì´ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ê°€ ì¶©ëŒí•˜ëŠ” ê²ƒìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ ëœë‹¤.

![2.]({site.url}/images/2023-04-16-gl5/2..jpg)

ìœ„ ì‚¬ì§„ì„ ì°¸ê³ í•˜ë©´ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. 



## ğŸ”¥ì½”ë“œ

```c++
// ê³µê³¼ ê³µì´ ì¶©ëŒí•˜ëŠ” í•¨ìˆ˜
void Collision_Detection_Between_Balls(void) {
    float   distance;

    delta.x = moving_ball.x - fixed_ball.x; // x ë³€í™”ëŸ‰
    delta.y = moving_ball.y - fixed_ball.y; // y ë³€í™”ëŸ‰ 
     
    distance = sqrt(pow(delta.x, 2) + pow(delta.y, 2)); // ì›ê³¼ ì› ì‚¬ì´ì˜ ê±°ë¦¬
    if (distance <= radius1 + moving_ball_radius) {
        velocity.y *= -1;
        velocity.x *= -1;
        collision_count++;
    }
}
```



# 3. ê³µê³¼ ë²½ì˜ ì¶©ëŒ ì—¬ë¶€

ê³µì´ ë²½ì„ ë„˜ì–´ê°€ì§€ ëª»í•˜ê²Œ ì¶©ëŒ ì—¬ë¶€ë¥¼ íŒë³„í•œë‹¤.

1. ê³µì˜ ì¤‘ì‹¬ ì¢Œí‘œë¥¼ ì´ìš©í•œë‹¤.
2. ì™¼ìª½ ë²½ë©´ì€ xì¢Œí‘œê°€ 0 ì´ë¯€ë¡œ ì›ì˜ ì¤‘ì‹¬ì´ 0ë³´ë‹¤ ì‘ë‹¤ë©´ ì¶©ëŒí•˜ê²Œ ëœë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œ ì‘ì„±í•˜ê²Œ ë˜ë©´ ì™„ë²½í•˜ê²Œ ì¶©ëŒì„ í‘œì‹œí•  ìˆ˜ ì—†ë‹¤. ë°˜ì§€ë¦„ì˜ ê¸¸ì´ë§Œí¼ ëº€ ê°’ì´ 0ë³´ë‹¤ ì‘ì•„ì•¼ í•œë‹¤.

![image-20230416211758663]({site.url}/images/2023-04-16-gl5/image-20230416211758663.png)

## ğŸ”¥ì½”ë“œ

```c++ 
void Collision_Detection_to_Walls(void) {
    float distance_left = moving_ball.x - moving_ball_radius; // left
    float distance_right = moving_ball.x + moving_ball_radius; // right
    float distance_top = moving_ball.y + moving_ball_radius; // top
    float distance_bottom = moving_ball.y - moving_ball_radius; // bottom

    // ì™¼ìª½ ë²½ê³¼ ì˜¤ë¥¸ìª½ ë²½ ì¶©ëŒ
    if (distance_left <= left || distance_right >= left + width) {
        velocity.x *= -1;
    }
    // ìœ„ìª½ ë²½ê³¼ ì•„ë˜ìª½ ë²½ ì¶©ëŒ
    else if (distance_top >= bottom + height || 
             distance_bottom <= bottom){
        velocity.y *= -1;
    }
}
```



# 4. ì‚¬ê°í˜•ê³¼ ê³µì˜ ì¶©ëŒ ì—¬ë¶€

1. ì›ì˜ ì¤‘ì‹¬ ì¢Œí‘œ êµ¬í•˜ê¸°
2. ì‚¬ê°í˜•ì˜ ì¤‘ì‹¬ ì¢Œí‘œ êµ¬í•˜ê¸° 

```c++
float Rect_x = (paddle.x + paddle2.x) / 2.0;
float Rect_y = (paddle.y + paddle2.y) / 2.0;
```

3. ì‚¬ê°í˜• ì¤‘ì‹¬ ì¢Œí‘œ -  ì› ì¤‘ì‹¬ ì¢Œí‘œ ì‚¬ì´ì˜ ê±°ë¦¬ êµ¬í•˜ê¸° 

```c++
 float distance_x = fabs(moving_ball.x - Rect_x);
 float distance_y = fabs(moving_ball.y - Rect_y);
```

4. ì‚¬ê°í˜•ì˜ ë°˜ì§€ë¦„

```c++
float paddleX = (paddle2.x - paddle.x) / 2.0; // ê°€ë¡œê¸¸ì´ì˜ ë°˜ì§€ë¦„
float paddleY = (paddle2.y - paddle.y) / 2.0; // ì„¸ë¡œê¸¸ì´ì˜ ë°˜ì§€ë¦„
```

5.  ì›ì´ ì‚¬ê°í˜• ì•ˆì— ìˆì„ ë•Œ ì¶©ëŒí•˜ëŠ” ê²½ìš°

```c++
if (distance_x <= paddleX || distance_y <= paddleY) {
        // ì›ì´ ì‚¬ê°í˜• ì•ˆì— ìˆìŒ
        velocity.y *= -1; // yë°©í–¥ ë°˜ëŒ€ë¡œ
}
```

6. ì¶©ëŒí•˜ì§€ ì•ŠëŠ” ê²½ìš°

```c++
if (distance_x > (paddleX + moving_ball_radius) ||
        distance_y > (paddleY + moving_ball_radius)) {
        // ì¶©ëŒí•˜ì§€ ì•ŠìŒ
        return;
}
```

7. ì›ì´ ì‚¬ê°í˜• ëª¨ì„œë¦¬ì— ì¶©ëŒí•˜ëŠ” ê²½ìš°

```c++
else {
        // ì›ì´ ì‚¬ê°í˜• ëª¨ì„œë¦¬ì— ì¶©ëŒí•¨
        float corner_distance = pow(distance_x - paddleX, 2) + pow(distance_y - paddleY, 2);
        if (corner_distance <= pow(moving_ball_radius, 2)) {
            // ì›ê³¼ ëª¨ì„œë¦¬ ê°„ ì¶©ëŒ
            velocity.x *= -1; // xë°©í–¥ ë°˜ëŒ€ë¡œ
            velocity.y *= -1; // yë°©í–¥ ë°˜ëŒ€ë¡œ
        }
}
```



# 5. íŒ¨ë“¤ ë°” ì›€ì§ì´ê¸°

ì™¼ìª½, ì˜¤ë¥¸ìª½ ë°©í–¥ í‚¤ë¥¼ ì´ìš©í•´ íŒ¨ë“¤ ë°”ë¥¼ ì›€ì§ì´ê²Œ ë§Œë“ ë‹¤. 

ë°©í–¥ í‚¤ëŠ” `SpecialKey`í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

ì™¼ìª½ê³¼ ì˜¤ë¥¸ìª½ ë°©í–¥ í‚¤ ì½”ë“œì˜ ì•Œê³ ë¦¬ì¦˜ì€ ë¹„ìŠ·í•˜ë‹¤.

ê·¸ëŸ¬ë‹ˆ ì™¼ìª½ ë°©í–¥ í‚¤ë¥¼ ëˆŒë €ì„ ë•Œ íŒ¨ë“¤ì´ ì›€ì§ì´ëŠ” ë°©ë²•ìœ¼ë¡œ ì•Œì•„ë³´ê² ë‹¤.

1. ì™¼ìª½ ë°©í–¥ í‚¤ë¥¼ ëˆ„ë¥¼ ê²½ìš° íŒ¨ë“¤ ì „ì²´ê°€ ì™¼ìª½ìœ¼ë¡œ ì´ë™

   ì¦‰, íŒ¨ë“¤ì˜ xì¢Œí‘œê°€ `(-)ë°©í–¥`ìœ¼ë¡œ ì´ë™

2. ì™¼ìª½ ë²½ì„ íŒ¨ë“¤ì´ ë„˜ì–´ê°€ë©´ ì•ˆëœë‹¤.

   ì¦‰, ì™¼ìª½ í•˜ë‹¨ì˜ xì¢Œí‘œëŠ” ì™¼ìª½ ë²½ì˜ xì¢Œí‘œì™€ ë™ì¼í•˜ê²Œ

   ì˜¤ë¥¸ìª½ ìƒë‹¨ì˜ xì¢Œí‘œëŠ” width/4 ë¡œ ì •í•œë‹¤.

3.  ì˜¤ë¥¸ìª½ ë°©í–¥ í‚¤ë¥¼ ëˆŒë €ì„ ë•, xì¢Œí‘œê°€ `(+)ë°©í–¥` ìœ¼ë¡œ ì´ë™í•˜ëŠ” ê²ƒì„ ì œì™¸í•˜ê³¤ ë˜‘ê°™ë‹¤.



## ğŸ”¥ì½”ë“œ

```c++
// ë°©í–¥í‚¤ë¡œ íŒ¨ë“¤ ë°” ì›€ì§ì´ê¸° 
void SpecialKey(int key, int x, int y) {
    switch (key)
    {
    case GLUT_KEY_LEFT:		paddle.x -= paddle_speed; paddle2.x -= paddle_speed;
        // ì™¼ìª½ ë²½ì„ ë„˜ì§€ ëª»í•˜ë„ë¡ ë§‰ìŒ 
        if (paddle.x < left) {
            paddle.x = left;
            paddle2.x = width / 4;
        }
        break;
    case GLUT_KEY_RIGHT:	paddle.x += paddle_speed; paddle2.x += paddle_speed;	
        // ì˜¤ë¥¸ìª½ ë²½ì„ ë„˜ì§€ ëª»í•˜ë„ë¡ ë§‰ìŒ
        if (paddle2.x > width) {
            paddle.x = width / 1.3;
            paddle2.x = width;
        }
        break;
    default:
        break;
    }
}
```



# 6. GAME OVER

ê³µì´ ì•„ë˜ìª½ ë²½ì„ ë„˜ì–´ê°€ë©´ ê²Œì„ì´ ì¢…ë£Œë˜ë„ë¡ ë§Œë“¤ë ¤ê³  í•œë‹¤.

1. ê²Œì„ í™”ë©´ì„ ê²€ì€ìƒ‰ìœ¼ë¡œ ë§Œë“ ë‹¤.
2. í•˜ì–€ ê¸€ì”¨ë¡œ "!GAME OVER!" í…ìŠ¤íŠ¸ë¥¼ ì¶œë ¥í•œë‹¤.

## ğŸ”¥ì½”ë“œ

```c++
void showGameOverScreen() {
    // í™”ë©´ì„ ê²€ì€ìƒ‰ìœ¼ë¡œ ì§€ìš°ê¸°
    glClearColor(0.0, 0.0, 0.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);
    
    // í…ìŠ¤íŠ¸ ìƒ‰ìƒ ì§€ì • (í°ìƒ‰)
    glColor3f(1.0, 1.0, 1.0);
    // í…ìŠ¤íŠ¸ ì¶œë ¥ ìœ„ì¹˜ ì§€ì •
    glRasterPos2f(120, height/2);

    // í…ìŠ¤íŠ¸ ì¶œë ¥
    const char* str = "!GAME OVER!";
    for (int i = 0; str[i] != '\0'; i++) {
        glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_24, str[i]);
    }

    // í™”ë©´ì— ì¶œë ¥
    glutSwapBuffers();
}

```

ê³µ-ë²½ ì¶©ëŒ ì½”ë“œ ì¶”ê°€ 

```c++
  else if (distance_top >= bottom + height) {
        velocity.y *= -1;
    }
    // ì•„ë˜ìª½ ë²½ -> ê²Œì„ ì˜¤ë²„ 
    else if (distance_bottom <= bottom) {
        showGameOverScreen();
        glutSwapBuffers();
    }
```



# ë§ˆë¬´ë¦¬

ì§€ê¸ˆì€ ì´ë ‡ê²Œ ê°„ë‹¨í•œ ì½”ë“œë¡œ ê²Œì„ ì¢…ë£Œë¥¼ ë‚˜íƒ€ëƒˆì§€ë§Œ..  ì–¼ë§ˆì˜ ì‹œê°„ ë™ì•ˆ ê²Œì„ì„ í–ˆëŠ”ì§€ ì‹œê°„ë„ ì¶”ê°€í•´ë³´ê³  ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆëŠ” ë²„íŠ¼ë„ ë§Œë“¤ì–´ ë³´ë ¤ê³  í•œë‹¤

ê·¸ë¦¬ê³  ê³µì´ ì•„ë‹ˆë¼ ì´ì œëŠ” ë²½ëŒì„ ë§Œë“¤ì–´ì„œ ë²½ëŒê¹¨ê¸° ê²Œì„ì„ ë§Œë“¤ì–´ë³´ë ¤ê³  í•œë‹¤. 

ì¶”ê°€ë¡œ ì‹œì‘ ë©”ë‰´ë¥¼ ë¨¼ì € ë³´ì—¬ì¤€ ë’¤ ê²Œì„ì„ ì‹œì‘í•˜ê²Œ ë§Œë“¤ê³  ì‹¶ë‹¤.

ë˜, ìŒì•…ë„ ì¶”ê°€í•´ ê¸´ì¥ê°ì„ ë†’ì´ê³  ì ìˆ˜ë¥¼ ë„ì…í•´ ìˆœìœ„ë¥¼ ê°€ë¦´ ìˆ˜ ìˆê²Œ ë§Œë“œëŠ” ê²ƒì´ ëª©í‘œì´ë‹¤.



<img src="{site.url}/images/2023-04-16-gl5/image-20230416215555523.png" alt="image-20230416215555523" style="zoom:50%;" />

<img src="{site.url}/images/2023-04-16-gl5/image-20230416215638056.png" alt="image-20230416215638056" style="zoom:50%;" />