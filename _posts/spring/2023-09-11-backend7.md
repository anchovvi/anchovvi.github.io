---
layout: single
title: "ê²Œì‹œíŒ í”„ë¡œì íŠ¸-  ê²Œì‹œê¸€ í˜ì´ì§€ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì •ì˜"
categories: spring
tags: [java, spring]
sidebar:
    nav: "counts"
---

# 0. ë°°ìš¸ ë‚´ìš©

ê²Œì‹œê¸€ í˜ì´ì§€ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ì •ì˜í•˜ë ¤ê³  í•œë‹¤.



# 1. ê²Œì‹œê¸€ ê¸°ëŠ¥ êµ¬í˜„

ì¶”ê°€, ì½ê¸°, ìˆ˜ì •, ì‚­ì œ ê¸°ëŠ¥ í•„ìš”í•¨

## ì¶”ê°€

ì½ê¸°ëŠ” ê²Œì‹œê¸€ ì¡°íšŒì‹œ ë°˜í™˜ì—¬ë¶€ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í–ˆìœ¼ë¯€ë¡œ ì œì™¸í•¨

ì¶”ê°€ë¶€í„° `ArticleServiceTest.java`ì—ì„œ ì§„í–‰í•¨



```java
@DisplayName("ê²Œì‹œê¸€ ì •ë³´ë¥¼ ì…ë ¥í•˜ë©´, ê²Œì‹œê¸€ì„ ìƒì„±í•œë‹¤.")
@Test
void givenArticleInfo_whenSavingArticle_thenSavesArticle(){
    //  Given
    given(articleRepository.save(any(Article.class))).willReturn(null);

    //  When
    sut.saveArticle(ArticleDto.of(LocalDateTime.now(), "Ancho", "title", "content", "#java"));

    //  Then
    then(articleRepository).should().save(any(Article.class));
}
```

 ê²Œì‹œê¸€ ë”ë¯¸ë°ì´í„°ë¥¼ ë¦¬í¬ì§€í† ë¦¬ì— ì €ì¥í•˜ëŠ” ë©”ì†Œë“œì¸ save ë©”ì†Œë“œë¥¼ ë§Œë“¤ê³  ê·¸ ë©”ì†Œë“œê°€ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ì´ë‹¤. 



`SaveArticle.java`

```java
public void saveArticle(ArticleDto dto){

}
```

ìœ„ì™€ ê°™ì´ ì ìœ¼ë©´ ì˜¤ë¥˜ ë°œìƒí•¨

ğŸš¨ í…ŒìŠ¤íŠ¸ ìƒì„±ì„ ëª©ì ìœ¼ë¡œ í•œ ê²ƒìœ¼ë¡œ save ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì§€ ì•Šì€ í˜„ì¬ ì‹œì ì—ì„  ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²ƒì´ ë§ìŒ



## ìˆ˜ì •

ì¶”ê°€ì™€ ë¹„ìŠ·í•œ êµ¬ì¡°ë¡œ ì‘ì„± , ë°ì´í„° ì¤‘ì—ì„œ ì‘ì„±ìì™€ ì‘ì„±ì¼ìëŠ” í•„ìš”í•˜ì§€ ì•Šì•„ì„œ Dto ìƒˆë¡­ê²Œ ìƒì„±í•¨ 

**ArticleUpdateDto**

![image-20230911142834143]({{site.url}}/images/2023-09-11-backend7/image-20230911142834143.png)



## ì‚­ì œ

ì„ì˜ì˜ article ID ê°’ì„ ì‚­ì œí•˜ëŠ” ë©”ì†Œë“œ í˜¸ì¶œ, í˜¸ì¶œì—¬ë¶€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸

![image-20230911142950847]({{site.url}}/images/2023-09-11-backend7/image-20230911142950847.png)

![image-20230911143018706]({{site.url}}/images/2023-09-11-backend7/image-20230911143018706.png)

ì´ í…ŒìŠ¤íŠ¸ë„ êµ¬í˜„ë˜ì§€ ì•Šì€ ê²ƒìœ¼ë¡œ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•˜ëŠ” ê²ƒì´ ë§ìŒ



# ëŒ“ê¸€ ê´€ë ¨ í…ŒìŠ¤íŠ¸

ëŒ“ê¸€ ê¸°ëŠ¥ë„ ë˜‘ê°™ì´ íŒŒì¼ì„ ìƒì„±í•œë‹¤.



`ArticleCommentService.java`

```java
package com.ancho.crud.service;

import com.ancho.crud.dto.ArticleCommentDto;
import com.ancho.crud.repository.ArticleCommentRepository;
import com.ancho.crud.repository.ArticleRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;

@RequiredArgsConstructor
@Transactional
@Service
public class ArticleCommentService {

    private final ArticleRepository articleRepository;
    private final ArticleCommentRepository articleCommentRepository;

    @Transactional(readOnly = true)
    public List<ArticleCommentDto> searchArticleComment(Long articleId) {
        return List.of();
    }
}
```



`ArticleCommentServiceTest.java`

```java
package com.ancho.crud.service;

import com.ancho.crud.domain.Article;
import com.ancho.crud.domain.ArticleComment;
import com.ancho.crud.domain.type.SearchType;
import com.ancho.crud.dto.ArticleCommentDto;
import com.ancho.crud.dto.ArticleDto;
import com.ancho.crud.repository.ArticleCommentRepository;
import com.ancho.crud.repository.ArticleRepository;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.junit.jupiter.MockitoExtension;
import org.springframework.data.domain.Page;

import java.time.LocalDateTime;
import java.util.List;
import java.util.Optional;

import static org.assertj.core.api.Assertions.*;
import static org.mockito.ArgumentMatchers.any;
import static org.mockito.BDDMockito.given;
import static org.mockito.BDDMockito.then;

@DisplayName("ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ - ëŒ“ê¸€")
@ExtendWith(MockitoExtension.class)
class ArticleCommentServiceTest {

    @Mock private ArticleRepository articleRepository;
    @InjectMocks private ArticleCommentService sut;

    @DisplayName("ê²Œì‹œê¸€ IDë¡œ ì¡°íšŒí•˜ë©´, í•´ë‹¹í•˜ëŠ” ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•œë‹¤.")
    @Test
    void givenArticleId_whenSearchingArticleComments_thenReturnsArticleComments(){
        //  Given
        Long articleId = 1L;
        given(articleRepository.findById(articleId))
                .willReturn(Optional.of(Article.of("title", "content", "#java")));

        //  When
        List<ArticleCommentDto> articleComments =  sut.searchArticleComment(articleId);   //  ID

        //  Then
        assertThat(articleComments).isNotNull();
        then(articleRepository).should().findById(articleId);
    }

    @DisplayName("ëŒ“ê¸€ ì •ë³´ë¥¼ ì…ë ¥í•˜ë©´, ëŒ“ê¸€ì„ ì €ì¥í•œë‹¤.")
    @Test
    void givenArticleCommentInfo_whenSavingArticleComment_thenSavesArticleComment(){
    }
}
```



`ArticleCommentDto.java`

```java
package com.ancho.crud.dto;

import java.io.Serializable;
import java.time.LocalDateTime;

/**
 * DTO for {@link com.ancho.crud.domain.ArticleComment}
 */
public record ArticleCommentDto(
        LocalDateTime createdAt,
        String createBy,
        LocalDateTime modifiedAt,
        String modifiedBy,
        String content
) {
    public static ArticleCommentDto of(LocalDateTime createdAt, String createBy, LocalDateTime modifiedAt, String modifiedBy, String content) {
        return new ArticleCommentDto(createdAt, createBy, modifiedAt, modifiedBy, content);
    }
}
```

