---
layout: single
title: "데이터베이스 -6장"
categories: database
tags: [데이터베이스]
sidebar:
    nav: "counts"


---



# 6장 관계 데이터 연산
## 01. 관계 데이터 연산의 개념
`데이터 모델` = 데이터 구조 + 연산 + 제약조건

### 관계 데이터 연산(relational data operation)
- 관계 데이터 모델의 연산
- **원하는 데이터를 얻기 위해 릴레이션에 필요한 처리 요구를 수행**하는 것
- "관계 대수" 와 "관계 해석"이 있음
  - 기능과 표현력 측면에서 능력 동등함
  
  ![image-20231018090749134]({{site.url}}/images/2023-10-18-data6/image-20231018090749134.png)


### 관계 대수와 관계 해석의 역할
- 관계 대수나 해석으로 기술할 수 있는 모든 질의를 기술할 수 있는 데이터 언어를 관계적으로 완전하다고 판단함
  - 질의 : 데이터에 대한 처리 요구


### ⭐관계 대수(relational algebra)의 개념
- 원하는 결과를 얻기 위해 `릴레이션의 처리 과정 순서대로 기술`하는 언어 ▶ 절차 언어(SQL 언어)
- `릴레이션을 처리하는 연산자의 모임`
    - 8개 연산자 
    - 일반 집합 연산자(4), 순수 관계 연산자(4)
- `폐쇄 특성(closure property)` 존재
  - 피 연산자가 릴레이션이면 연산의 결과도 릴레이션이다.


## 02. 관계 대수
![image-20231018090857299]({{site.url}}/images/2023-10-18-data6/image-20231018090857299.png)

### ⭐일반 집합 연산자(set Operation)

![image-20231018090936814]({{site.url}}/images/2023-10-18-data6/image-20231018090936814.png)

- 릴레이션이 `투플의 집합`이라는 개념을 이용하는 연산자
- 이항 연산자 (피 연산자가 두개)

#### 특성
- 피 연산자 2개 필요 ▶ 2개의 릴레이션 대상으로 연산 수행
- 합집합, 교집합, 차집합은 피연산자인 두 릴레이션이 합병 가능해야 함
  - 합병 가능 조건
    - 두 릴레이션의 `차수`가 같아야 한다. (속성 개수가 동일해야 함)
    - 두 릴레이션에서 `서로 대응되는 속성의 도메인`이 같아야 한다. (타입이 같아야 한다.)

🚨 단, `속성의 이름`은 같지 않아도 됨

#### 일반 집합 연산자 - 합집합(union)
- 합병 가능한 두 릴레이션 R, S의 합집합 ▶ R∪S
  - 릴레이션 R에 속하거나 S에 속하는 모든 투플로 결과 릴레이션 구성
- 결과 릴레이션 특성
  - 차수는 릴레이션 R,S의 차수와 같다.
  - 카디널리티는 릴레이션 R,S의 카디널리티를 더한 것과 같거나 적어진다.
  - 같은 경우는 R과 S가 서로소인 경우이다.
    $$|R∪S| <= |R| + |S|$$
- 교환, 결합적 특징 가짐


#### 일반 집합 연산자 - 교집합(intersection)
- 합병 가능한 두 릴레이션 R, S의 교집합 ▶ R ∩ S
  - 릴레이션 R, S에 공통으로 속하는 투플로 결과 릴레이션 구성
- 결과 릴레이션 특성
  - 차수는 릴레이션 R,S의 차수와 같다.
  - 카디널리티는 릴레이션 R,S의 카디널리티를 더한 것과 같거나 적어진다.
  - 같은 경우는 R과 S가 부분집합 관계인 경우이다.
    $$|R ∩ S| <= min(|R|,|S|)$$
- 교환, 결합적 특징 가짐


#### 일반 집합 연산자 - 차집합(difference)
- 합병 가능한 두 릴레이션 R, S의 차집합 ▶ R - S
  - 릴레이션 R에는 존재하지만, S에는 존재하지 않는 투플로 결과 릴레이션 구성
- 결과 릴레이션 특성
  - 차수는 릴레이션 R,S의 차수와 같다.
  - R-S 카디널리티 : R 카디널리티와 같거나 적다.
  - S-R 카디널리티 : S 카디널리티와 같거나 적다.
  🚨 서로소인 경우에만 같아진다.

#### 일반 집합 연산자 - 카티션 프로덕트(cartesian product), 곱집합
- 합병 가능한 두 릴레이션 R, S의 카티션 프로덕트 ▶ R x S
  - 릴레이션 R에는 속한 각 투플과  릴레이션 S에 속한 각 투플을 모두 연결해 만들어진 새로운 투플로 결과 릴레이션 구성
- 결과 릴레이션 특성
  - 차수는 릴레이션 R, S의 차수의 합이다.
  - 카디널리티 = 릴레이션 R * 카디널리티 S
- 교환, 결합적 특징 가짐

### ⭐순수 관계 연산자(relational operation)

![image-20231018091024316]({{site.url}}/images/2023-10-18-data6/image-20231018091024316.png)

- 릴레이션의 `구조와 특성`을 이용하는 연산자
- DB를 위해 만들어진 연산자 

#### ⭐셀렉트(select)
- 릴레이션에서 `조건`을 만족하는 `투플만 선택`해 결과 릴레이션 구성
- 하나의 릴레이션 대상으로 연산 수행 ▶ 단항 연산자
$$ 수학적 표현법 : σ(조건식)(릴레이션)$$
$$ 데이터 언어적 표현법 : 릴레이션 where 조건식$$
- 조건식(= 비교식, 프레디킷(predicate))
  - `속성의 상수 비교` , `속성들 간 비교`로 표현
  - 비교연산자( =, ≠, <, ≤, >, ≥), 논리연산자(AND(∧), OR(∨), NOT(ㄱ)) 이용해 작성
- 교환적 특징 

🚨 결과 릴레이션은 연산 대상 릴레이션의 `수평적 부분집합`

#### ⭐프로젝트(project)
- 릴레이션에서 `선택한 속성의 값`으로 결과 릴레이션 구성
- 하나의 릴레이션 대상으로 연산 수행 ▶ 단항 연산자
$$ 수학적 표현법 : π(속성 리스트)(릴레이션)$$
$$ 데이터 언어적 표현법 : 릴레이션[속성리스트]$$

🚨 결과 릴레이션에서 `동일한 투플`은 `중복되지 않음`

🚨 결과 릴레이션은 연산 대상 릴레이션의 `수직적 부분집합`


#### ⭐조인(join)
- 조인 속성을 이용해 `두 릴레이션을 조합`하여 결과 릴레이션 구성
    - 조인 속성의 값이 `같은` 투플만 연결해 생성된 투플을 결과 릴레이션에 포함
    - 조인 속성 : 두 릴레이션이 공통으로 가지고 있는 속성(보통 외래키 관계)
    $$ 표현법 : 릴레이셥1 ▷◁ 릴레이션2$$
- 1. 자연 조인(natural join)이라고도 함
  - $$ 표현법 : 릴레이셥1 ▷◁N 릴레이션2$$

- 2. 세타 조인(theta join, θ-join)
  - 자연 조인에 비해 더 `일반화된 조인`
  - 주어진 조인 조건을 만족하는 두 릴레이션의 모든 투플을 연결해 생성된 새로운 투플로 결과 릴레이션 구성
  - 결과 릴레이션 차수는 `두 릴레이션 차수의 합`
  - $$ 표현법 : 릴레이셥1 ▷◁AθB 릴레이션2$$

- 3. 동일 조인(equi-join)
  - θ 연산자가 "="인 세타 조인을 의미

⭐🚨 자연 조인과 다른 점
    ▶ 동일 조인에서는 `중복 제거 안함`
    ▶ 자연 조인에서는 `중복 제거 함`

- 4. 세미 조인(semi-join)
  - 조인 속성으로 프로젝트 연산을 수행한 릴레이션을 이용하는 조인
  $$표현법 : 릴레이션1 ⋉ 릴레이션2$$
  - 릴레이션2를 조인 속성으로 프로젝트 연산 후, 릴레이션1에 자연조인 해 결과 릴레이션 구성
  - 불필요한 속성 미리 제거 ▶ 조인 연산 비용 줄임
  - 교환적 특징 없음

- 5. 외부 조인(outer-join)
  - 자연 조인 연산에서 제외되는 투플도 결과 릴레이션에 포함시키는 조인
    - 두 릴레이션에 있는 모든 투플을 결과 릴레이션에 포함시킴
    $$표현법 : 릴레이션1 ▷◁+ 릴레이션2$$

#### ⭐ 디비전(division)
- 표현법 : 릴레이션1 ÷ 릴레이션2
- `릴레이션2의 모든 투플`과 관련이 있는 `릴레이션1의 투플`로 결과 릴레이션 구성
  - 단, 릴레이션1이 릴레이션2의 모든 속성을 포함하고 있어야 한다.
  - 즉, 도메인이 같아야 한다.


## 03. 관계 해석
- 처리를 원하는 데이터가 무엇인지 기술하는 언어 (비절차 언어)
- 수학의 프레디킷 해석 기반
- 분류
  - 투플 관계 해석
  - 도메인 관계 해석


## 추가 내용

### 기본연산
합집합, 차집합, 카티션 프로덕트, 프로젝트, 셀렉트 : 다른 연산으로 대체할 수 없다.
### 복합 연산
교집합, 조인, 자연주인, 디비전-% : 몇 개의 기본 연산으로 대체 가능하다


### 개명 연산
중간 처리 결과 relation이나 attribute의 이름을 적당히 변경하는 것을 개명(RENAME) 연산이라고 한다

https://programming-oddments.tistory.com/178 참고
