---
layout: single
title: "ê²Œì‹œíŒ í”„ë¡œì íŠ¸- ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ ë¡œì§ í…ŒìŠ¤íŠ¸ ì •ì˜"
categories: spring
tags: [java, spring]
sidebar:
    nav: "counts"
---

# 0. ë°°ìš¸ ë‚´ìš©

ì• ì‹œê°„ì—” ë™ë“±ì„± ê²€ì‚¬ê¹Œì§€ ì‹¤ìŠµì„ í•´ ë³´ì•˜ë‹¤. 

ì˜¤ëŠ˜ì€ DB ì ‘ê·¼ ë¡œì§ í…ŒìŠ¤íŠ¸ë¥¼ ì •ì˜í•˜ê³  êµ¬í˜„í•˜ëŠ” ê²ƒ ê¹Œì§€ í•´ë³´ê² ë‹¤. 



# 1. ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ë™

![image-20230907084648364]({{site.url}}/images/2023-09-03-backend2/image-20230907084648364.png)

main/java/ ì•ˆì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë©´ ìœ„ ì‚¬ì§„ì²˜ëŸ¼ í…Œì´ë¸”ì´ ìƒì„±ë˜ì—ˆë‹¤ëŠ” ë¬¸êµ¬ì™€ ì¸ë±ì‹±ê¹Œì§€ ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. 

ê·¸ë¦¬ê³  DB ë¸Œë¼ìš°ì €ì— board ìŠ¤í‚¤ë§ˆì— í…Œì´ë¸”ì´ ìƒì„±ë˜ì–´ ìˆëŠ” ê²ƒë„ ìœ¡ì•ˆìœ¼ë¡œ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. 

![image-20230907085307361]({{site.url}}/images/2023-09-03-backend2/image-20230907085307361.png)



ì´ë ‡ê²Œ í™•ì¸ì„ í–ˆë‹¤ë©´ article í…Œì´ë¸”ì— ì—°ê´€ê´€ê³„ ì„¤ì •ì„ í•œë‹¤.

```java
@OrderBy("id")	//	ì•„ì´ë”” ê¸°ì¤€ ì •ë ¬
@OneToMany(mappedBy ="article", cascade = CascadeType.ALL )
private final Set<ArticleComment> articleComments = new LinkedHashSet<>();
```

ì½”ë“œ ë‚´ë¶€ì— @ToStringì„ ë³´ë©´ lazy loadë¥¼ í¬í•¨í•˜ê³  ìˆì–´ ë‚˜ì¤‘ì— í¼í¬ë¨¼ìŠ¤ë‚˜ ë©”ëª¨ë¦¬ ì €í•˜ë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤ëŠ” ê²½ê³ ê°€ ë‚˜íƒ€ë‚œë‹¤.

![image-20230907085629694]({{site.url}}/images/2023-09-03-backend2/image-20230907085629694.png)

ì•Œë¦¼ ë¬¸êµ¬ ì•„ë˜ **Exclude all lazy loaded fields with @ToString.Exclude** ë¥¼ ì„ íƒí•´ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤. ì´ ì¡°ì¹˜ëŠ” í¼í¬ë¨¼ìŠ¤ë‚˜ ë©”ëª¨ë¦¬ ì €í•˜ë³´ë‹¤ ë” í° ìˆœí™˜ ì°¸ì¡°í˜„ìƒì„ ë§‰ì•„ì¤€ë‹¤. ìˆœí™˜ ì°¸ì¡°ëŠ” ì°¸ì¡°í•˜ëŠ” ëŒ€ìƒì´ ì„œë¡œ ë¬¼ë ¤ìˆì–´ ì°¸ì¡°í•  ìˆ˜ ì—†ê²Œ ë˜ëŠ” í˜„ìƒì´ë‹¤.



@ToStringì´ Article.javaë¥¼ ê±°ì³ê°ˆ ë•Œ Setì—ì„œ articleComments ë¥¼ ì°ìœ¼ë ¤ê³  ì‹œë„í•˜ê¸° ìœ„í•´ AricleCommentë¡œ ì´ë™í•œë‹¤. 

ArticleCommentì—ë„ @ToStringì´ ì¡´ì¬í•´ì„œ í•„ë“œ ì „ì²´ë¥¼ ì°ìœ¼ë ¤ê³  í•˜ëŠ”ë° ê·¸ì¤‘ì— ê²Œì‹œë¬¼ ID ì¸ `private Article article`ì´ ìˆê¸° ë•Œë¬¸ì— ë˜ Articleë¡œ ë„˜ì–´ê°€ì„œ ë‚´ìš©ì„ ì°ì–´ì•¼ í•˜ëŠ”ë° ë˜ @ToStringì´ ìˆì–´ì„œ ë‹¤ì‹œ ì°ê³ ... ë˜ ArticleComment ê°€ê³ ... ë˜ í•˜ê³ .. ë˜ í•˜ê³ ..
ì´ëŸ° ì‹ìœ¼ë¡œ ë¬´í•œ ë°˜ë³µì´ ì¼ì–´ë‚˜ê²Œ ëœë‹¤. ëŒ“ê¸€ì—ì„œë¶€í„° ê¸€ì„ ì°¸ì¡°í•˜ëŠ” ê²½ìš°ëŠ” ì •ìƒì ì¸ ê²½ìš°ì§€ë§Œ ê¸€ì—ì„œ ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸ë¥¼ ë½‘ì•„ë³´ëŠ” ê²½ìš°ëŠ” ë§ì§€ ì•Šì•„ì„œ Articleì— ìˆëŠ” `@ToString`ì„ exclude í•œ ê²ƒì´ë‹¤.

```java
//    ëŒ“ê¸€ì˜ ê²½ìš° ê²Œì‹œê¸€ì€ í•˜ë‚˜ì§€ë§Œ ëŒ“ê¸€ì€ ì—¬ëŸ¬ê°œ ì¼ìˆ˜ ìˆìœ¼ë¯€ë¡œ @ManyToOne ì„ ì¶”ê°€í–ˆë‹¤.
//    ì–‘ë°©í–¥ ë°”ì¸ë”©
    @ToString.Exclude   //  í¼í¬ë¨¼ìŠ¤ë‚˜ ë©”ëª¨ë¦¬ ì €í•˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì„ ì–¸
    @OrderBy("id")  //  id ê¸°ì¤€ ì •ë ¬
    @OneToMany(mappedBy ="article", cascade = CascadeType.ALL )
    private final Set<ArticleComment> articleComments = new LinkedHashSet<>();
```

ì´ë ‡ê²Œ ì–‘ë°©í–¥ ë°”ì¸ë”©ë„ êµ¬ì„±í•˜ì˜€ë‹¤. ì§€ê¸ˆê¹Œì§€ëŠ” JPA ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ ì—”í‹°í‹°ë¥¼ ì •ì˜í•œ ê²ƒ ë¿ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ê°€ ì´ë£¨ì–´ì§€ì§€ ì•Šì•˜ë‹¤. ì´ë¥¼ ìœ„í•´ì„  `Repository` ì½”ë“œë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.



# 2. JPA í…ŒìŠ¤íŠ¸

![image-20230907090319099]({{site.url}}/images/2023-09-03-backend2/image-20230907090319099.png)

ë§Œë“  ë‹¤ìŒ ArticleRepositoryì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ìƒì„±í•œë‹¤. ë¦¬í¬ì§€í† ë¦¬ê´€ë ¨ í…ŒìŠ¤íŠ¸ê°€ ì•„ë‹ˆë¼ JPA í…ŒìŠ¤íŠ¸ì´ê¸° ë•Œë¬¸ì— ì´ë¦„ì„ ë³€ê²½í–ˆë‹¤. 

 junit ëŒ€ì‹ ì— assertjë¥¼ ì‚¬ìš©í–ˆë‹¤(import static org.assertj.core.api.Assertions.*;)

```java
import static org.assertj.core.api.Assertions.*;

@DisplayName("JPA ì—°ê²° í…ŒìŠ¤íŠ¸")
@Import(JpaConfig.class)
@DataJpaTest
class JpaRepositoryTest {


    private final ArticleRepository articleRepository;
    private final ArticleCommentRepository articleCommentRepository;

    public JpaRepositoryTest(
           @Autowired ArticleRepository articleRepository,
           @Autowired ArticleCommentRepository articleCommentRepository
    ) {
        this.articleRepository = articleRepository;
        this.articleCommentRepository = articleCommentRepository;
    }

    @DisplayName("select í…ŒìŠ¤íŠ¸")
    @Test
   void givenTestData_whenSelecting_thenWorksFine() {
       // Given

       // When

       // Then
   }
}
```

`ArticleRepository` ë¥¼ findAll ì„ ì‚¬ìš©í•´ ëª¨ë“  ë‚´ìš©ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ê°€ì ¸ì˜¤ëŠ” í…ŒìŠ¤íŠ¸ ì§„í–‰

```java
@Test
    @DisplayName("select í…ŒìŠ¤íŠ¸")
   void givenTestData_whenSelecting_thenWorksFine() {
       // Given

       // When
        List<Article> articles = articleRepository.findAll();

        // Then
        assertThat(articles)
                .isNotNull()
                .hasSize(0);
   }
```

![image-20230907090728950]({{site.url}}/images/2023-09-03-backend2/image-20230907090728950.png)

í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ì•„ì£¼ ì˜ ë‚˜íƒ€ë‚œë‹¤. 

ì´ì œëŠ” í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ì¶”ê°€í•´ ê²°ê³¼ë¥¼ í™•ì¸í•´ ë³´ì.

`.mockaroo` ì‚¬ì´íŠ¸ë¥¼ ì‚¬ìš©í•´ ëŒ€ëŸ‰ì˜ í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ë§Œë“¤ì–´ 

ê²Œì‹œë¬¼ì´ 123ê°œ ì´ê³  ëŒ“ê¸€ì´ 1000ê°œì¸ `resource/data.sql` íŒŒì¼ì„ ìƒì„±í•œë‹¤.

ê·¸ ë‹¤ìŒ, í…ŒìŠ¤íŠ¸ ë ˆí¬ì§€í† ë¦¬ë¡œ ëŒì•„ê°€ expented ìˆ˜ì¹˜ë¥¼ 123ìœ¼ë¡œ ë³€ê²½í•œ í›„ ì‹¤í–‰í•˜ë©´

```java
    @Test
    @DisplayName("select í…ŒìŠ¤íŠ¸")
   void givenTestData_whenSelecting_thenWorksFine() {
       // Given

       // When
        List<Article> articles = articleRepository.findAll();

        // Then
        assertThat(articles)
                .isNotNull()
                .hasSize(123);	//	ê²Œì‹œê¸€ 123ê°œ ì´ë¯€ë¡œ hasSize(123)ìœ¼ë¡œ ì„¤ì •í•¨
   }
```

![image-20230907091042229]({{site.url}}/images/2023-09-03-backend2/image-20230907091042229.png)

í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µí•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

ë‚˜ë¨¸ì§€ CRUD í…ŒìŠ¤íŠ¸ë„ ì§„í–‰ í•œë‹¤.

```java
//    articleRepositoryì˜ ê°¯ìˆ˜previousCountë¡œ ì„ ì–¸, ìƒˆë¡œìš´ article ì—”í‹°í‹°ë¥¼ ìƒì„±í›„ ì €ì¥í•œ ë‹¤ìŒ,
//    articleRepositoryì˜ ê°¯ìˆ˜ê°€ previousCountì—ì„œ 1ì„ ë”í•œ ê°’ê³¼ ê°™ìœ¼ë©´ í…ŒìŠ¤íŠ¸ ì„±ê³µì´ë‹¤.
    @DisplayName("insert í…ŒìŠ¤íŠ¸")
    @Test
    void givenTestData_whenInserting_thenWorksFine(){
        //  Given
        long previousCount = articleRepository.count();

        //  When
        Article savedArticle = articleRepository.save(Article.of("new article", "new content", "#spring"));


        //  Then
        assertThat(articleRepository.count()).isEqualTo(previousCount + 1);
    }


//    ê¸°ì¡´ì˜ ë°ì´í„°ë¥¼ ìˆ˜ì •í–ˆì„ ë•Œ ì¿¼ë¦¬ ë°œìƒí•˜ëŠ”ì§€ í™•ì¸
    @DisplayName("update í…ŒìŠ¤íŠ¸")
    @Test
    void givenTestData_whenUpdating_thenWorksFine(){
        //  Given
        Article article = articleRepository.findById(1L).orElseThrow();
        String updatedHashtag = "#springboot";
        article.setHashtag(updatedHashtag);

        //  When
        Article savedArticle = articleRepository.saveAndFlush(article);
        //	ë°ì´í„°ë² ì´ìŠ¤ì˜ í•´ì‹œíƒœê·¸ ê°’ ë³€ë™ë˜ë„ë¡ ë§Œë“¤ì–´ì£¼ëŠ” ì½”ë“œ 
        //	articleRepository.flush(); ì½”ë“œë„ ì‚¬ìš© ê°€ëŠ¥í•¨ 
        //	í•˜ì§€ë§Œ ë¡¤ë°±ì´ ì§„í–‰ë˜ë¯€ë¡œ ë‹¤ì‹œ ì›ë˜ëŒ€ë¡œ ëŒì•„ì˜¬ ê²ƒì„ 

        //  Then
        assertThat(savedArticle)
            .hasFieldOrPropertyWithValue("hashtag", updatedHashtag);
    }


    @DisplayName("delete í…ŒìŠ¤íŠ¸")
    @Test
    void givenTestData_whenDeleting_thenWorksFine(){
        //  Given
        Article article = articleRepository.findById(1L).orElseThrow();
        long previousArticleCount = articleRepository.count();  //  ê¸°ì¡´ì˜ ê²Œì‹œê¸€ ê°œìˆ˜
        long previousArticleComment = articleCommentRepository.count(); //  ê¸°ì¡´ì˜ ëŒ“ê¸€ ê°œìˆ˜
        //  ê²Œì‹œê¸€ì„ ì‚­ì œí•  ë•Œ, í•´ë‹¹ ê²Œì‹œê¸€ì˜ ëŒ“ê¸€ ì‚¬ì´ì¦ˆ í™•ì¸
        int deletedCommentSize = article.getArticleComments().size();

        //  When
        articleRepository.delete(article);  //  delete

        //  Then
//        ê²Œì‹œê¸€ ì‚­ì œë¥¼ í•˜ë©´ ê¸°ì¡´ ê²Œì‹œê¸€ ê°œìˆ˜ì—ì„œ 1ê°œì”© ì‚¬ë¼ì§
        assertThat(articleRepository.count())
            .isEqualTo(previousArticleCount - 1);
// ëŒ“ê¸€ ì‚­ì œí•  ë•, ê¸°ì¡´ì˜ ëŒ“ê¸€ ê°œìˆ˜ì—ì„œ ê²Œì‹œê¸€ì´ ì‚­ì œë  ë•Œ 
// í•´ë‹¹ ê²Œì‹œê¸€ì— ì‘ì„±ëœ ëŒ“ê¸€ ì „ë¶€ ì‚¬ë¼ì ¸ì•¼í•˜ëŠ” ê²ƒì„ ìŠìœ¼ë©´ ì•ˆë¨ 
        assertThat(articleCommentRepository.count())
            .isEqualTo(previousArticleComment - deletedCommentSize);
    }
```



## ğŸš¨ ì˜¤ë¥˜ ë°œìƒ not-null property references a null or transient value

ì „ì²´ ë‚´ìš©ì€ org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value : com.jycproject.bulletinboard.domain.Article.createdAt; nested exception is org.hibernate.PropertyValueException: not-null property references a null or transient value : com.jycproject.bulletinboard.domain.Article.createdAt

createdAtì—ì„œ ë¬¸ì œê°€ ë°œìƒí•œ ëª¨ì–‘.

í˜„ì¬ `JpaConfig`ì—ì„œëŠ” Auditing ì„¸íŒ…ì´ ë˜ì–´ìˆì§€ë§Œ ì¶”ê°€ì ìœ¼ë¡œ í•˜ë‚˜ ë”ì‘ì„±í•´ì•¼í•˜ëŠ”ë°, ë°”ë¡œ ì—”í‹°í‹°ì—ì„œë„ Auditingì„ ì“°ê² ë‹¤ëŠ” í‘œì‹œë¥¼ í•´ì¤˜ì•¼í•œë‹¤. `domain/Article`ì—ì„œ ì•„ë˜ì˜ ë‚´ìš©ì„ ì‘ì„±í•´ì•¼í•œë‹¤.

```null
@EntityListeners(AuditingEntityListener.class)
```

@EntityListeners - Entityë¥¼ DBì— ì ìš©í•˜ê¸° ì´ì „, ì´í›„ì— ì»¤ìŠ¤í…€ ì½œë°±ì„ ìš”ì²­í•  ìˆ˜ ìˆëŠ” ì–´ë…¸í…Œì´ì…˜
AuditingEntityListener - Entity ì˜ì†ì„± ë° ì—…ë°ì´íŠ¸ì— ëŒ€í•œ Auditing ì •ë³´ë¥¼ ìº¡ì²˜í•˜ëŠ” JPA Entity Listener

ì´ ë¬¸êµ¬ëŠ” ë‹¹ì—°íˆ ArticleComment ì—”í‹°í‹°ì—ë„ ì‘ì„±ë˜ì–´ìˆì–´ì•¼ í•œë‹¤. ê·¸ë˜ì•¼ Auditingì„ ì“¸ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

ë‹¤ì‹œ í…ŒìŠ¤íŠ¸ë¥¼ ëŒë ¤ì„œ ì„±ê³µì„ í™•ì¸í•œë‹¤.

![image-20230907091903810]({{site.url}}/images/2023-09-03-backend2/image-20230907091903810.png)

ì´ë¡œì¨ í…ŒìŠ¤íŠ¸ê°€ ì „ë¶€ ì„±ê³µí•œ ê²ƒì„ í™•ì¸í–ˆë‹¤. 

ì»¤ë°‹ ì‘ì—… ìˆ˜í–‰ ì „ yamlì—ì„œ ì£¼ì„ì²˜ë¦¬ í•œ ë‚´ìš©

```java
#  datasource:
#    url: jdbc:h2:mem:board;mode=mysql //inmemory ëª¨ë“œë¡œ boardì´ë¦„ì„ ì‚¬ìš©í•˜ê³  mysqlëª¨ë“œë¥¼ í™œì„±í™”
#    driver-class-name: org.h2.Driver // ë“œë¼ì´ë²„ ì´ë¦„
#  sql.init.mode: always 
#  test.database.replace: none //  ëª¨ë“  í…ŒìŠ¤íŠ¸ëŠ” ë‚´ testDBì„¤ì •ì„ ì‚¬ìš©í•˜ê²Œ í•˜ê² ë‹¤.
```

í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ h2 DBë¥¼ ì´ìš©í•´ MYSQLê³¼ ê°€ê¹Œìš´ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ì„¤ì •ì´ë‹¤.



# 3. h2 ì½˜ì†”

http://localhost:8080/h2-console ì‹¤í–‰ (yamlíŒŒì¼ì—ì„œ h2.console.enable= trueë¡œ ë³€ê²½ í›„ ì‹¤í–‰)

yaml íŒŒì¼ì—ì„œ spring-datasource ì„¤ì •ì„ ì•„ë˜ì²˜ëŸ¼ ë³€ê²½

![image-20230907092338493]({{site.url}}/images/2023-09-03-backend2/image-20230907092338493.png)

ì´ë ‡ê²Œ ì‘ì„± í›„ JDBC URL ë˜‘ê°™ì´ ì‘ì„±í•œ ë’¤ ì—°ê²°í•˜ë©´ 

![image-20230907092425027]({{site.url}}/images/2023-09-03-backend2/image-20230907092425027.png)

ì—°ê²°ì´ ì„±ê³µí•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŒ 

í…Œì´ë¸”ì„ ì„ íƒí•´ `SELECT` ëª…ë ¹ì–´ë¡œ ì‹¤í–‰í•˜ë©´ `data.sql`ì— ì €ì¥ëœ ê²Œì‹œê¸€, ëŒ“ê¸€ì˜ ë‚´ìš©ì„ ë³¼ ìˆ˜ ìˆë‹¤.

h2 ì½˜ì†”ì„ í†µí•´ì„  í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì¶”ê°€í•œ ê²Œì‹œê¸€ê³¼ ëŒ“ê¸€ì„ í™•ì¸í•˜ëŠ” ìš©ë„ë¡œë§Œ ì‚¬ìš©í•  ê²ƒì´ë‹¤.



# 4. ë°˜ë³µ ì½”ë“œ ì¶”ì¶œ

`Article` ë„ë©”ì¸ì—ì„œ ìƒì„±,ìˆ˜ì •ì/ë‚ ì§œì˜ ë‚´ìš©ì€ ê°™ì€ ë¶€ë¶„ì´ ë§ì´ ë•Œë¬¸ì— ì¶”ì¶œì´ ê°€ëŠ¥í•˜ë‹¤.

ì¶”ì¶œì˜ ë°©ì‹ì€ 2ê°€ì§€ê°€ ì¡´ì¬í•œë‹¤.

## @Embedable

value íƒ€ì…ìœ¼ë¡œ ì •ì˜í•˜ëŠ” ê²ƒìœ¼ë¡œ ë¹„ìŠ·í•œ ì†ì„±ì„ ê°€ì§€ëŠ” ì• íŠ¸ë¦¬ë·°íŠ¸ë¥¼ í•˜ë‚˜ì˜ ê°’ìœ¼ë¡œ ë§Œë“¤ì–´ ì¬ì‚¬ìš©ì„±ì„ ë†’ì¼ ìˆ˜ ìˆëŠ” ë°©ë²•ì„ 

## @MappedSuperclass

ì—”í‹°í‹°ë¡œ ì •ì˜í•˜ëŠ” ê²ƒìœ¼ë¡œ ë‹¤ìˆ˜ì˜ ì—”í‹°í‹°ì— ê³µí†µì ìœ¼ë¡œ ì ìš©í•  ë•Œ ì‚¬ìš© ê°€ëŠ¥í•¨

ğŸš¨ì˜¤ëŠ˜ì€ ì´ ë°©ë²•ìœ¼ë¡œ ì¶”ì¶œì„ í•˜ë ¤ê³  í•œë‹¤.

domain í´ë” ë‚´ë¶€ì— `AuditingFields`ë¼ëŠ” í´ë˜ìŠ¤ íŒŒì¼ ìƒì„±í•œ ë’¤ 

`Article`ì— ì¤‘ë³µë˜ëŠ” í•„ë“œë¥¼ ì˜®ê¹€

```java
package com.ancho.crud.domain;

//    ë°˜ë³µ ì½”ë“œ ì¶”ì¶œ
//    Article ë„ë©”ì¸ì—ì„œ ìƒì„±, ìˆ˜ì •ì/ë‚ ì§œ ë‚´ìš©ì´ ê°™ì€ ë¶€ë¶„ì´ ë§ì•„ ì¶”ì¶œ ê°€ëŠ¥

import jakarta.persistence.Column;
import jakarta.persistence.EntityListeners;
import jakarta.persistence.MappedSuperclass;
import lombok.Getter;
import lombok.ToString;
import org.springframework.data.annotation.CreatedBy;
import org.springframework.data.annotation.CreatedDate;
import org.springframework.data.annotation.LastModifiedBy;
import org.springframework.data.annotation.LastModifiedDate;
import org.springframework.data.jpa.domain.support.AuditingEntityListener;
import org.springframework.format.annotation.DateTimeFormat;

import java.time.LocalDateTime;

@Getter
@ToString
@EntityListeners(AuditingEntityListener.class)
//  í˜„ì¬ JpaConfigì—ì„œëŠ” Auditing ì„¸íŒ…ì´ ë˜ì–´ìˆì§€ë§Œ ì¶”ê°€ì ìœ¼ë¡œ í•˜ë‚˜ ë”ì‘ì„±í•´ì•¼í•˜ëŠ”ë°,
//  ë°”ë¡œ ì—”í‹°í‹°ì—ì„œë„ Auditingì„ ì“°ê² ë‹¤ëŠ” í‘œì‹œë¥¼ í•´ì¤˜ì•¼í•œë‹¤. 
//	domain/Articleì—ì„œ ì•„ë˜ì˜ ë‚´ìš©ì„ ì‘ì„±í•´ì•¼í•œë‹¤.
//	@EntityListeners(AuditingEntityListener.class)
//	@EntityListeners - Entityë¥¼ DBì— ì ìš©í•˜ê¸° ì´ì „, ì´í›„ì— 
//	ì»¤ìŠ¤í…€ ì½œë°±ì„ ìš”ì²­í•  ìˆ˜ ìˆëŠ” ì–´ë…¸í…Œì´ì…˜
//	AuditingEntityListener - Entity ì˜ì†ì„± ë° ì—…ë°ì´íŠ¸ì— ëŒ€í•œ 
//	Auditing ì •ë³´ë¥¼ ìº¡ì²˜í•˜ëŠ” JPA Entity Listener
//ì´ ë¬¸êµ¬ëŠ” ë‹¹ì—°íˆ ArticleComment ì—”í‹°í‹°ì—ë„ ì‘ì„±ë˜ì–´ìˆì–´ì•¼ í•œë‹¤. 
//	ê·¸ë˜ì•¼ Auditingì„ ì“¸ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.
@MappedSuperclass
public abstract class AuditingFields {
    //  í•´ë‹¹ í•„ë“œë“¤ì´ ì‹¤ì œ ì›¹ í™”ë©´ì—ì„œ ë³´ì—¬ì¤„ ë•Œ,
    //  ì›¹ í™”ë©´ì—ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì•„ ì„¸íŒ…í•  ë• íŒŒì‹±ì´ ì˜ ë˜ì–´ìˆì–´ì•¼ í•¨
    //  íŒŒì‹±ì— ê´€ë ¨ëœ ë£°ì¸ @DateTimeFormat ì¶”ê°€í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ìŒ
    @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME)
    @CreatedDate
    @Column(nullable = false, updatable = false)    
    // updatable : ë§Œë“¤ì–´ì§€ëŠ” ìˆœê°„ ê¸°ë¡ë˜ëŠ” ë°ì´í„°ë¡œ ë³€ê²½ ë¶ˆê°€ í‘œì‹œí•¨
    private LocalDateTime createdAt;    // ìƒì„±ì¼ì‹œ

    @CreatedBy
    @Column(nullable = false, updatable = false, length = 100)
    private String createBy;    // ìƒì„±ì

    @LastModifiedDate
    @Column(nullable = false)
    private LocalDateTime modifiedAt;   // ìˆ˜ì •ì¼ì‹œ

    @LastModifiedBy
    @Column(nullable = false, length = 100)
    private String modifiedBy;  //  ìˆ˜ì •ì

}
```

